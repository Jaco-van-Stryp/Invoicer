<div class="page-header">
  <h1 class="text-3xl font-bold m-0">Payments</h1>
  <p class="text-muted-color mt-2 mb-0">View and manage all payments across invoices</p>
</div>

<div class="content-card">
  <p-table
    [value]="payments()"
    [loading]="loading()"
    styleClass="p-datatable-sm"
    [paginator]="true"
    [rows]="20"
    [rowsPerPageOptions]="[10, 20, 50]"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} payments"
  >
    <ng-template #header>
      <tr>
        <th pSortableColumn="invoiceNumber">Invoice <p-sortIcon field="invoiceNumber" /></th>
        <th pSortableColumn="clientName">Client <p-sortIcon field="clientName" /></th>
        <th pSortableColumn="paidOn">Date Paid <p-sortIcon field="paidOn" /></th>
        <th pSortableColumn="amount" class="text-right">Amount <p-sortIcon field="amount" /></th>
        <th>Notes</th>
        <th class="action-column">Actions</th>
      </tr>
    </ng-template>
    <ng-template #body let-payment>
      <tr>
        <td class="font-mono text-sm">{{ payment.invoiceNumber }}</td>
        <td>{{ payment.clientName }}</td>
        <td class="text-muted-color">{{ payment.paidOn | date: 'mediumDate' }}</td>
        <td class="text-right font-semibold">{{ payment.amount | currency }}</td>
        <td class="text-muted-color text-sm">{{ payment.notes || 'â€”' }}</td>
        <td class="action-column">
          <button
            pButton
            icon="pi pi-trash"
            severity="danger"
            [text]="true"
            [rounded]="true"
            (click)="deletePayment(payment.id)"
            title="Delete payment"
          ></button>
        </td>
      </tr>
    </ng-template>
    <ng-template #empty>
      <tr>
        <td colspan="6" class="text-center py-8">
          <div class="flex flex-col items-center gap-3">
            <i class="pi pi-wallet text-4xl text-muted-color"></i>
            <p class="text-lg text-muted-color m-0">No payments recorded yet</p>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
