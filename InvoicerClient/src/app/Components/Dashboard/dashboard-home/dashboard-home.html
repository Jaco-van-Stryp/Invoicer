<!-- Hero Section -->
<div class="hero-section">
  <div class="hero-left">
    <div class="hero-greeting">
      <div class="user-avatar" aria-hidden="true">{{ userInitials() }}</div>
      <div class="hero-text">
        <h1 class="hero-title">
          Welcome back, <span class="gradient-text">{{ company()?.name }}</span>
        </h1>
      </div>
    </div>

    <div class="company-details">
      @if (company()?.email) {
        <span class="company-detail-item">
          <i class="pi pi-envelope" aria-hidden="true"></i>
          {{ company()?.email }}
        </span>
      }
      @if (company()?.phoneNumber) {
        <span class="company-detail-item">
          <i class="pi pi-phone" aria-hidden="true"></i>
          {{ company()?.phoneNumber }}
        </span>
      }
      @if (company()?.address) {
        <span class="company-detail-item">
          <i class="pi pi-map-marker" aria-hidden="true"></i>
          {{ company()?.address }}
        </span>
      }
    </div>
  </div>

  @if (company()?.logoUrl) {
    <div class="hero-logo">
      <img
        [src]="company()?.logoUrl | fileUrl"
        [attr.alt]="company()?.name ? company()!.name + ' logo' : 'Company logo'"
        class="company-logo"
      />
    </div>
  }
</div>

<!-- Overview Cards -->
<div class="overview-grid">
  <!-- Clients card -->
  <a class="overview-card" routerLink="/dashboard/clients" aria-label="Go to clients">
    <div class="overview-card-icon clients-icon" aria-hidden="true">
      <i class="pi pi-users"></i>
    </div>
    <div class="overview-card-body">
      <div class="overview-card-count">{{ clientCount() }}</div>
      <div class="overview-card-label">Clients</div>
    </div>
    <div class="overview-card-footer">
      <span class="overview-card-action">
        <i class="pi pi-plus" aria-hidden="true"></i>
        New Client
      </span>
      <i class="pi pi-arrow-right overview-arrow" aria-hidden="true"></i>
    </div>
  </a>

  <!-- Products card -->
  <a class="overview-card" routerLink="/dashboard/products" aria-label="Go to products">
    <div class="overview-card-icon products-icon" aria-hidden="true">
      <i class="pi pi-box"></i>
    </div>
    <div class="overview-card-body">
      <div class="overview-card-count">{{ productCount() }}</div>
      <div class="overview-card-label">Products</div>
    </div>
    <div class="overview-card-footer">
      <span class="overview-card-action">
        <i class="pi pi-plus" aria-hidden="true"></i>
        New Product
      </span>
      <i class="pi pi-arrow-right overview-arrow" aria-hidden="true"></i>
    </div>
  </a>

  <!-- Invoices card -->
  <a class="overview-card" routerLink="/dashboard/invoices" aria-label="Go to invoices">
    <div class="overview-card-icon invoices-icon" aria-hidden="true">
      <i class="pi pi-file"></i>
    </div>
    <div class="overview-card-body">
      <div class="overview-card-count">{{ invoiceCount() }}</div>
      <div class="overview-card-label">Invoices</div>
    </div>
    <div class="overview-card-footer">
      <span class="overview-card-action">
        <i class="pi pi-plus" aria-hidden="true"></i>
        New Invoice
      </span>
      <i class="pi pi-arrow-right overview-arrow" aria-hidden="true"></i>
    </div>
  </a>
</div>

<!-- Summary Stats -->
<div class="summary-row">
  <div class="summary-stat">
    <span class="summary-label">Total Revenue (YTD)</span>
    <span class="summary-value gradient-text">{{ totalRevenue() | currency }}</span>
  </div>
  <div class="summary-divider" aria-hidden="true"></div>
  <div class="summary-stat">
    <span class="summary-label">Pending Invoices</span>
    <span class="summary-value" [class.warn]="pendingInvoices() > 0">
      {{ pendingInvoices() }}
    </span>
  </div>
  <div class="summary-divider" aria-hidden="true"></div>
  <div class="summary-stat">
    <span class="summary-label">Tax Number</span>
    <span class="summary-value">{{ company()?.taxNumber || 'â€”' }}</span>
  </div>
</div>

<!-- Income chart -->
<div class="chart-card">
  <div class="chart-header">
    <h2 class="chart-title">Monthly Revenue</h2>
    <p class="chart-subtitle">Last 12 months</p>
  </div>
  @if (monthlyChartData()) {
    <div class="chart-container">
      <p-chart type="line" [data]="monthlyChartData()" [options]="lineChartOptions" />
    </div>
  } @else {
    <div class="chart-empty">
      <i class="pi pi-chart-line" aria-hidden="true"></i>
      <p>No revenue data yet. Create and record payments on invoices to see your income chart.</p>
    </div>
  }
</div>
