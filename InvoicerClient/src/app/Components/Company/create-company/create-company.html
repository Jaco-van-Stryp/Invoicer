<div class="create-company-container">
  <!-- Animated blobs -->
  <div class="blob blob-1" aria-hidden="true"></div>
  <div class="blob blob-2" aria-hidden="true"></div>
  <div class="blob blob-3" aria-hidden="true"></div>

  <div class="create-company-content">
    <!-- Left: Branding -->
    <div class="branding-side">
      <div class="brand-badge">
        <i class="pi pi-building" aria-hidden="true"></i>
        Company Setup
      </div>
      <h1 class="brand-title">Set up your <span class="gradient-text">company</span></h1>
      <p class="brand-subtitle">
        Add your company details to start creating professional invoices in minutes.
      </p>
      <div class="brand-features">
        <div class="brand-feature">
          <i class="pi pi-file" aria-hidden="true"></i>
          <span>Professional invoices in seconds</span>
        </div>
        <div class="brand-feature">
          <i class="pi pi-users" aria-hidden="true"></i>
          <span>Manage clients and products</span>
        </div>
        <div class="brand-feature">
          <i class="pi pi-chart-line" aria-hidden="true"></i>
          <span>Track your business at a glance</span>
        </div>
      </div>
    </div>

    <!-- Right: Form card -->
    <div class="form-side">
      <div class="form-card">
        <div class="flex flex-col gap-2 text-center mb-6">
          <h2 class="text-2xl font-bold m-0">Company Details</h2>
          <p class="text-muted-color">Only the name is required. You can fill the rest later.</p>
        </div>
        <div class="flex flex-col gap-5">
          <p-floatLabel>
            <input
              pInputText
              id="company-name"
              type="text"
              class="w-full"
              required
              [ngModel]="name()"
              (ngModelChange)="name.set($event)"
              autocomplete="organization"
            />
            <label for="company-name">Company Name *</label>
          </p-floatLabel>
          <p-floatLabel>
            <input
              pInputText
              id="company-email"
              type="email"
              class="w-full"
              [ngModel]="email()"
              (ngModelChange)="email.set($event)"
              autocomplete="email"
            />
            <label for="company-email">Email</label>
          </p-floatLabel>
          <p-floatLabel>
            <input
              pInputText
              id="company-phone"
              type="tel"
              class="w-full"
              [ngModel]="phoneNumber()"
              (ngModelChange)="phoneNumber.set($event)"
              autocomplete="tel"
            />
            <label for="company-phone">Phone Number</label>
          </p-floatLabel>
          <p-floatLabel>
            <input
              pInputText
              id="company-tax"
              type="text"
              class="w-full"
              [ngModel]="taxNumber()"
              (ngModelChange)="taxNumber.set($event)"
            />
            <label for="company-tax">Tax Number</label>
          </p-floatLabel>
          <p-floatLabel>
            <textarea
              pTextarea
              id="company-address"
              class="w-full"
              rows="2"
              [ngModel]="address()"
              (ngModelChange)="address.set($event)"
              autocomplete="street-address"
            ></textarea>
            <label for="company-address">Address</label>
          </p-floatLabel>
          <p-floatLabel>
            <textarea
              pTextarea
              id="company-payment"
              class="w-full"
              rows="2"
              [ngModel]="paymentDetails()"
              (ngModelChange)="paymentDetails.set($event)"
            ></textarea>
            <label for="company-payment">Payment Details</label>
          </p-floatLabel>

          <!-- Logo Upload -->
          <div class="flex flex-col gap-2">
            <label class="text-sm font-medium">Company Logo</label>
            @if (logoPreview()) {
              <div class="flex items-center gap-3">
                <img [src]="logoPreview()" alt="Logo preview" class="logo-preview" />
                <p-button
                  icon="pi pi-times"
                  [rounded]="true"
                  [text]="true"
                  severity="danger"
                  size="small"
                  (click)="removeLogo()"
                  pTooltip="Remove logo"
                  aria-label="Remove logo"
                />
              </div>
            } @else {
              <p-fileUpload
                mode="basic"
                accept="image/*"
                [maxFileSize]="5000000"
                chooseLabel="Upload Logo"
                chooseIcon="pi pi-upload"
                [auto]="true"
                [customUpload]="true"
                (uploadHandler)="onLogoSelected($event)"
                styleClass="w-full"
              />
            }
            @if (uploadingLogo()) {
              <small class="text-muted-color">Uploading...</small>
            }
          </div>

          <p-button
            label="Create Company"
            icon="pi pi-building"
            iconPos="right"
            [loading]="loading()"
            [disabled]="!isFormValid()"
            styleClass="w-full"
            (click)="createCompany()"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="absolute bottom-4 left-4">
    <copyright />
  </div>
</div>
